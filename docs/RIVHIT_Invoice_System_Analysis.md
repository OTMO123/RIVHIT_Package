# –ê–Ω–∞–ª–∏–∑ —Å–∏—Å—Ç–µ–º—ã —Å—á–µ—Ç–æ–≤-—Ñ–∞–∫—Ç—É—Ä RIVHIT

## üìã –û–±–∑–æ—Ä –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
**–î–∞—Ç–∞:** 14 –∞–≤–≥—É—Å—Ç–∞ 2025  
**–¶–µ–ª—å:** –ò–∑—É—á–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á–µ—Ç–æ–≤-—Ñ–∞–∫—Ç—É—Ä –≤ —Å–∏—Å—Ç–µ–º–µ RIVHIT  
**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:** –¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∑–∞–ø–∏—Å—å –≤ –ë–î RIVHIT —Å—Ç—Ä–æ–≥–æ –∑–∞–ø—Ä–µ—â–µ–Ω–∞

## üîç –û—Å–Ω–æ–≤–Ω—ã–µ –≤—ã–≤–æ–¥—ã

### 1. API RIVHIT - –î–æ–∫—É–º–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

#### –ë–∞–∑–æ–≤—ã–π URL
```
https://api.rivhit.co.il/online/RivhitOnlineAPI.svc
```

#### –¢–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ
–ù–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –∏ API, –≤—ã—è–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:

| ID | –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ | –ù–∞–∑–≤–∞–Ω–∏–µ (HE) | –ù–∞–∑–≤–∞–Ω–∏–µ (EN) | –û–ø–∏—Å–∞–Ω–∏–µ |
|----|--------------|---------------|---------------|-----------|
| 1 | ORDER | ◊î◊ñ◊û◊†◊î | Order/Quote | –ó–∞–∫–∞–∑ –∏–ª–∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ |
| 2 | INVOICE | ◊ó◊©◊ë◊ï◊†◊ô◊™ | Invoice | –°—á–µ—Ç-—Ñ–∞–∫—Ç—É—Ä–∞ |
| 3 | DELIVERY | ◊™◊¢◊ï◊ì◊™ ◊û◊©◊ú◊ï◊ó | Delivery Note | –ù–∞–∫–ª–∞–¥–Ω–∞—è –Ω–∞ –¥–æ—Å—Ç–∞–≤–∫—É |
| 4 | RETURN | ◊î◊ó◊ñ◊®◊î | Return | –í–æ–∑–≤—Ä–∞—Ç —Ç–æ–≤–∞—Ä–∞ |
| 5 | RECEIPT | ◊ß◊ë◊ú◊î | Receipt | –ö–≤–∏—Ç–∞–Ω—Ü–∏—è –æ–± –æ–ø–ª–∞—Ç–µ |
| 6 | PROFORMA | ◊§◊®◊ï◊§◊ï◊®◊û◊î | Proforma | –ü—Ä–æ—Ñ–æ—Ä–º–∞-–∏–Ω–≤–æ–π—Å |
| 7 | ORDER_ITEMS | ◊§◊®◊ò◊ô ◊î◊ñ◊û◊†◊î | Order Details | –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏ |
| 8 | CREDIT | ◊ñ◊ô◊õ◊ï◊ô | Credit Note | –ö—Ä–µ–¥–∏—Ç-–Ω–æ—Ç–∞ |
| 9 | DEBIT | ◊ó◊ô◊ï◊ë | Debit Note | –î–µ–±–µ—Ç-–Ω–æ—Ç–∞ |
| 10 | STATEMENT | ◊ì◊ï◊ó | Statement | –û—Ç—á–µ—Ç/–≤—ã–ø–∏—Å–∫–∞ |

### 2. –ú–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

#### 2.1 –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã API

##### –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ó–ê–ü–†–ï–©–ï–ù–û –≤ –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ):
```
POST /Document.New
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–∏–Ω–≤–æ–π—Å, –∑–∞–∫–∞–∑, –Ω–∞–∫–ª–∞–¥–Ω–∞—è)
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–ª–∏–µ–Ω—Ç, —Ç–æ–≤–∞—Ä—ã, —Å—É–º–º—ã

POST /Document.NewExtended  
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ + –∫–≤–∏—Ç–∞–Ω—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å—á–µ—Ç–∞ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã

POST /Document.NewStream
- –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å –≤–æ–∑–≤—Ä–∞—Ç–æ–º –≤ –≤–∏–¥–µ –ø–æ—Ç–æ–∫–∞ (PDF/–¥—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç)

POST /Receipt.New
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–≤–∏—Ç–∞–Ω—Ü–∏–∏ –æ–± –æ–ø–ª–∞—Ç–µ
```

##### –ß—Ç–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–†–ê–ó–†–ï–®–ï–ù–û):
```
GET /Document.List
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤)
- –§–∏–ª—å—Ç—Ä—ã: —Ç–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞, –¥–∞—Ç—ã, —Å—Ç–∞—Ç—É—Å, –∫–ª–∏–µ–Ω—Ç

GET /Document.Details
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–æ–∫—É–º–µ–Ω—Ç–µ
- –í–∫–ª—é—á–∞–µ—Ç: —Ç–æ–≤–∞—Ä—ã, —Å—É–º–º—ã, –Ω–∞–ª–æ–≥–∏, –ø–ª–∞—Ç–µ–∂–∏

GET /Document.TypeList
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ

GET /Document.Copy
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–ø–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞ (PDF)
```

#### 2.2 –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∏–Ω–≤–æ–π—Å–∞–º–∏

```
POST /Document.InvoiceDecisionApproval
- –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—è –ø–æ —Å—á–µ—Ç—É-—Ñ–∞–∫—Ç—É—Ä–µ
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è

POST /Document.InvoiceDecisionCancel
- –û—Ç–º–µ–Ω–∞ —Ä–µ—à–µ–Ω–∏—è –ø–æ —Å—á–µ—Ç—É-—Ñ–∞–∫—Ç—É—Ä–µ
```

### 3. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á–µ—Ç–æ–≤-—Ñ–∞–∫—Ç—É—Ä

#### 3.1 –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞-–∏–Ω–≤–æ–π—Å–∞

```typescript
interface RivhitInvoice {
  // –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  document_id: number;           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –≤ —Å–∏—Å—Ç–µ–º–µ
  document_number: string;       // –ù–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞ (INV-2025-0001)
  document_type: 2;              // –¢–∏–ø = 2 (Invoice)
  
  // –î–∞—Ç—ã
  issue_date: Date;              // –î–∞—Ç–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è
  due_date: Date;                // –°—Ä–æ–∫ –æ–ø–ª–∞—Ç—ã
  payment_date?: Date;           // –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –¥–∞—Ç–∞ –æ–ø–ª–∞—Ç—ã
  
  // –ö–ª–∏–µ–Ω—Ç
  customer_id: number;           // ID –∫–ª–∏–µ–Ω—Ç–∞
  customer_name: string;         // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
  customer_vat: string;          // –ò–ù–ù/VAT –Ω–æ–º–µ—Ä
  customer_address: string;      // –ê–¥—Ä–µ—Å
  
  // –§–∏–Ω–∞–Ω—Å—ã
  subtotal: number;              // –°—É–º–º–∞ –±–µ–∑ –ù–î–°
  vat_rate: number;              // –°—Ç–∞–≤–∫–∞ –ù–î–° (17% –≤ –ò–∑—Ä–∞–∏–ª–µ)
  vat_amount: number;            // –°—É–º–º–∞ –ù–î–°
  total_amount: number;          // –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞
  currency: string;              // –í–∞–ª—é—Ç–∞ (ILS/USD/EUR)
  
  // –°—Ç–∞—Ç—É—Å
  status: number;                // 1-Draft, 2-Issued, 3-Sent, 4-Paid, 5-Cancelled
  payment_status: string;        // unpaid/partial/paid
  
  // –¢–æ–≤–∞—Ä—ã/—É—Å–ª—É–≥–∏
  items: InvoiceItem[];          // –ú–∞—Å—Å–∏–≤ –ø–æ–∑–∏—Ü–∏–π
  
  // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
  created_by: number;            // ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
  created_date: Date;            // –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
  updated_date: Date;            // –î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è
  notes?: string;                // –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
  reference?: string;            // –°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑
}

interface InvoiceItem {
  line_id: number;               // –ù–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏
  item_id: number;               // ID —Ç–æ–≤–∞—Ä–∞
  description: string;           // –û–ø–∏—Å–∞–Ω–∏–µ
  quantity: number;              // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
  unit_price: number;            // –¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É
  discount?: number;             // –°–∫–∏–¥–∫–∞
  tax_rate: number;              // –°—Ç–∞–≤–∫–∞ –Ω–∞–ª–æ–≥–∞
  line_total: number;            // –ò—Ç–æ–≥–æ –ø–æ —Å—Ç—Ä–æ–∫–µ
}
```

#### 3.2 –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è —Å—á–µ—Ç–∞-—Ñ–∞–∫—Ç—É—Ä—ã

```mermaid
graph TD
    A[–ó–∞–∫–∞–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω] --> B[–¢–æ–≤–∞—Ä —É–ø–∞–∫–æ–≤–∞–Ω]
    B --> C[–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞]
    C --> D{–î–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω—ã–µ?}
    D -->|–î–∞| E[–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞]
    D -->|–ù–µ—Ç| F[–ó–∞–ø—Ä–æ—Å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö]
    F --> C
    E --> G[–†–∞—Å—á–µ—Ç —Å—É–º–º –∏ –Ω–∞–ª–æ–≥–æ–≤]
    G --> H[Document.New API]
    H --> I[–ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞]
    I --> J[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î]
    J --> K[–û—Ç–ø—Ä–∞–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç—É]
    K --> L[Document.Send API]
```

### 4. –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å –∏–Ω–≤–æ–π—Å–∞–º–∏

#### 4.1 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- **Read-only —Ä–µ–∂–∏–º**: –í –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä
- **–ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã**: Document.New, Document.Update, Document.Delete
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: 5 –º–∏–Ω—É—Ç –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API

#### 4.2 –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
1. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ó–∞–∫–∞–∑ (Type 1) ‚Üí –ù–∞–∫–ª–∞–¥–Ω–∞—è (Type 3) ‚Üí –ò–Ω–≤–æ–π—Å (Type 2)
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ò–ù–ù, –∞–¥—Ä–µ—Å–∞, –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤
3. **–ù–∞–ª–æ–≥–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –ù–î–° 17% (—Å—Ç–∞–Ω–¥–∞—Ä—Ç –ò–∑—Ä–∞–∏–ª—è)
4. **–ù—É–º–µ—Ä–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –Ω—É–º–µ—Ä–∞—Ü–∏—è

#### 4.3 –•—Ä–∞–Ω–µ–Ω–∏–µ
- **–û—Å–Ω–æ–≤–Ω–∞—è –ë–î**: RIVHIT cloud database
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: SQLite –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- **–î–æ–∫—É–º–µ–Ω—Ç—ã**: PDF –∫–æ–ø–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ RIVHIT
- **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—Å–ª–µ 7 –ª–µ—Ç

### 5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —É–ø–∞–∫–æ–≤–∫–∏

#### 5.1 –¢–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å
```typescript
// –ü—Å–µ–≤–¥–æ–∫–æ–¥ –ø—Ä–æ—Ü–µ—Å—Å–∞
async function processOrderToInvoice(orderId: string) {
  // 1. –ü–æ–ª—É—á–∞–µ–º –∑–∞–∫–∞–∑
  const order = await api.getDocument(orderId, type: 7);
  
  // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —É–ø–∞–∫–æ–≤–∫–∏
  if (order.packing_status !== 'completed') {
    throw new Error('Order not packed');
  }
  
  // 3. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∏–Ω–≤–æ–π—Å–∞
  const invoiceData = {
    document_type: 2,
    customer_id: order.customer_id,
    items: order.items.map(item => ({
      ...item,
      quantity: item.packed_quantity // –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ —É–ø–∞–∫–æ–≤–∞–Ω–Ω–æ–µ
    })),
    reference: order.document_number
  };
  
  // 4. –í–ê–ñ–ù–û: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è Document.New
  // –í –Ω–∞—à–µ–π —Å–∏—Å—Ç–µ–º–µ - —Ç–æ–ª—å–∫–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  return prepareInvoiceData(invoiceData);
}
```

#### 5.2 –ú–µ—Å—Ç–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω–≤–æ–π—Å–æ–≤

1. **RIVHIT Cloud**:
   - –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
   - –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - –°–≤—è–∑–∏ —Å –¥—Ä—É–≥–∏–º–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏

2. **–õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î (SQLite)**:
   - –¢–∞–±–ª–∏—Ü–∞: `cached_documents`
   - –ü–æ–ª—è: document_id, document_type, data (JSON), cached_at
   - TTL: 300 —Å–µ–∫—É–Ω–¥

3. **–§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**:
   - –ü—É—Ç—å: `/documents/invoices/{year}/{month}/`
   - –§–æ—Ä–º–∞—Ç: PDF
   - –ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ: `INV_{document_number}_{date}.pdf`

### 6. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω–≤–æ–π—Å–∞–º–∏

#### 6.1 –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–Ω–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞)
```
GET /api/orders
- –ü–∞—Ä–∞–º–µ—Ç—Ä documentType=2 –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏–Ω–≤–æ–π—Å–æ–≤

GET /api/documents/:id
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–Ω–≤–æ–π—Å–∞

GET /api/documents/export
- –≠–∫—Å–ø–æ—Ä—Ç –∏–Ω–≤–æ–π—Å–æ–≤ –≤ Excel/CSV
```

#### 6.2 RIVHIT API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```
GET /Document.List?document_type=2
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∏–Ω–≤–æ–π—Å–æ–≤

GET /Document.Details?document_id={id}
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–Ω–≤–æ–π—Å–µ

GET /Document.Copies?document_ids={ids}
- –ü–∞–∫–µ—Ç–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–ø–∏–π

POST /Document.Send
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω–≤–æ–π—Å–∞ –ø–æ email (–ó–ê–ü–†–ï–©–ï–ù–û)
```

### 7. –í–∞–∂–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–∞–≤–∏–ª–∞

#### 7.1 –ó–∞–ø—Ä–µ—â–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
‚ùå –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω–≤–æ–π—Å–æ–≤ —á–µ—Ä–µ–∑ API  
‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–≤–æ–π—Å–æ–≤  
‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤  
‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ–ø–ª–∞—Ç—ã  
‚ùå –ü—Ä—è–º–∞—è –∑–∞–ø–∏—Å—å –≤ –ë–î RIVHIT  

#### 7.2 –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
‚úÖ –ß—Ç–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω–≤–æ–π—Å–æ–≤  
‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –∏–Ω–≤–æ–π—Å–∞  
‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ –æ—Ç—á–µ—Ç—ã  
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–Ω–≤–æ–π—Å–∞ (–±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫–∏)  

### 8. –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### 8.1 Naming Convention
- –ò–Ω–≤–æ–π—Å—ã: `INV-YYYY-NNNNN` (–Ω–∞–ø—Ä–∏–º–µ—Ä, INV-2025-00123)
- –ö–≤–∏—Ç–∞–Ω—Ü–∏–∏: `REC-YYYY-NNNNN`
- –ö—Ä–µ–¥–∏—Ç-–Ω–æ—Ç—ã: `CRD-YYYY-NNNNN`

#### 8.2 –°—Ç–∞—Ç—É—Å—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
```javascript
const DocumentStatus = {
  1: 'Draft',        // –ß–µ—Ä–Ω–æ–≤–∏–∫
  2: 'Issued',       // –í—ã–ø—É—â–µ–Ω
  3: 'Sent',         // –û—Ç–ø—Ä–∞–≤–ª–µ–Ω
  4: 'Paid',         // –û–ø–ª–∞—á–µ–Ω
  5: 'Cancelled',    // –û—Ç–º–µ–Ω–µ–Ω
  6: 'Overdue',      // –ü—Ä–æ—Å—Ä–æ—á–µ–Ω
  7: 'Partial'       // –ß–∞—Å—Ç–∏—á–Ω–æ –æ–ø–ª–∞—á–µ–Ω
};
```

#### 8.3 –°–≤—è–∑–∏ –º–µ–∂–¥—É –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
- Order (Type 7) ‚Üí Invoice (Type 2): —á–µ—Ä–µ–∑ –ø–æ–ª–µ `reference`
- Invoice ‚Üí Receipt (Type 5): —á–µ—Ä–µ–∑ –ø–æ–ª–µ `payment_reference`
- Invoice ‚Üí Credit Note (Type 8): —á–µ—Ä–µ–∑ –ø–æ–ª–µ `original_invoice`

### 9. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç–µ

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SafeRivhitService** –¥–ª—è read-only –æ–ø–µ—Ä–∞—Ü–∏–π
2. **–ö—ç—à–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ** –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ API
3. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** —Å –∏–Ω–≤–æ–π—Å–∞–º–∏
4. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ** –ø–µ—Ä–µ–¥ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –∏–Ω–≤–æ–π—Å–∞
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î

### 10. –í—ã–≤–æ–¥—ã

–°–∏—Å—Ç–µ–º–∞ RIVHIT –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω–≤–æ–π—Å–∞–º–∏, –≤–∫–ª—é—á–∞—è:
- –°–æ–∑–¥–∞–Ω–∏–µ, —á—Ç–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ
- –û—Ç–ø—Ä–∞–≤–∫—É –∫–ª–∏–µ–Ω—Ç–∞–º
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é PDF

–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —É–ø–∞–∫–æ–≤–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å RIVHIT –≤ —Ä–µ–∂–∏–º–µ read-only, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–∏—Å–∫–∞ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –ë–î
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±—É–¥—É—â–∏—Ö –∏–Ω–≤–æ–π—Å–æ–≤

**–í–∞–∂–Ω–æ**: –§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–æ–≤ –¥–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å RIVHIT –∏–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏.

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω–≤–æ–π—Å–æ–≤ (–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –º–µ—Ç–æ–¥)
```typescript
async function getInvoicesSafely(fromDate: string, toDate: string) {
  const safeService = new SafeRivhitService(apiToken);
  
  const filters = {
    document_type: 2, // Invoice
    date_from: fromDate,
    date_to: toDate,
    limit: 50
  };
  
  try {
    const invoices = await safeService.getDocuments(filters);
    
    // –ö—ç—à–∏—Ä—É–µ–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
    await cacheService.set('invoices', invoices, 300);
    
    return invoices;
  } catch (error) {
    console.error('Failed to fetch invoices:', error);
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏–∑ –∫—ç—à–∞ –µ—Å–ª–∏ –µ—Å—Ç—å
    return cacheService.get('invoices') || [];
  }
}
```

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–Ω–≤–æ–π—Å–∞ (–±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è)
```typescript
function prepareInvoiceData(order: Order): InvoiceData {
  return {
    document_type: 2,
    customer: {
      id: order.customer_id,
      name: order.customer_name,
      vat: order.customer_vat,
      address: order.customer_address
    },
    items: order.items.map(item => ({
      item_id: item.id,
      description: item.description,
      quantity: item.packed_quantity,
      unit_price: item.price,
      tax_rate: 0.17, // 17% VAT
      line_total: item.packed_quantity * item.price * 1.17
    })),
    totals: {
      subtotal: calculateSubtotal(order.items),
      vat: calculateVAT(order.items),
      total: calculateTotal(order.items)
    },
    reference: order.document_number,
    notes: `Created from order ${order.document_number}`
  };
}
```

---

**–î–æ–∫—É–º–µ–Ω—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω**: 14.08.2025  
**–ê–≤—Ç–æ—Ä**: System Analyst  
**–°—Ç–∞—Ç—É—Å**: Research Only - No Write Operations