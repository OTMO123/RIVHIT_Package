# Инструкция по настройке сетевого подключения принтера GoDEX

## 1. Настройка LAN на принтере

### Шаг 1: Войдите в меню настроек принтера
1. На панели принтера нажмите кнопку **Menu**
2. Выберите **Devices** → **LAN Settings**

### Шаг 2: Настройте сетевые параметры

#### Вариант A: DHCP (автоматическое получение IP)
1. В LAN Settings выберите **DHCP: Enable**
2. Принтер автоматически получит IP адрес от роутера
3. Запишите полученный IP адрес (отображается на экране)

#### Вариант B: Статический IP (рекомендуется)
1. В LAN Settings выберите **DHCP: Disable**
2. Установите параметры:
   - **IP Address**: 192.168.1.100 (или другой свободный IP в вашей сети)
   - **Subnet Mask**: 255.255.255.0
   - **Gateway**: 192.168.1.1 (IP вашего роутера)
   - **DNS**: 8.8.8.8
3. Сохраните настройки

### Шаг 3: Проверьте подключение
1. После сохранения настроек принтер перезагрузится
2. На экране должен отобразиться назначенный IP адрес
3. Попробуйте пинговать принтер с компьютера:
   ```bash
   ping 192.168.1.100
   ```

## 2. Обновление конфигурации приложения

### Шаг 1: Откройте файл конфигурации
Отредактируйте файл `packages/backend/printer-config.json`:

```json
{
  "printer": {
    "name": "GoDEX ZX420",
    "model": "ZX420",
    "connection_type": "ethernet",
    "port": "192.168.1.100",  // <- Укажите IP адрес вашего принтера
    "network_port": 9100,
    "timeout": 10000,
    "retry_attempts": 3
  }
}
```

### Шаг 2: Замените IP адрес
Замените `192.168.1.100` на фактический IP адрес вашего принтера

## 3. Тестирование подключения

### Вариант 1: Использование тестового скрипта
```bash
cd packages/backend
npx ts-node test-network-print.ts
```

### Вариант 2: Через API
1. Запустите backend сервер:
   ```bash
   npx lerna run dev --scope=@packing/backend
   ```

2. Отправьте тестовый запрос:
   ```bash
   curl -X POST http://localhost:3001/api/print/test
   ```

## 4. Устранение неполадок

### Проблема: Принтер не отвечает

1. **Проверьте сетевое подключение:**
   ```bash
   ping [IP_ПРИНТЕРА]
   ```

2. **Проверьте порт 9100:**
   ```bash
   telnet [IP_ПРИНТЕРА] 9100
   ```

3. **Проверьте настройки принтера:**
   - Убедитесь, что LAN включен
   - Проверьте правильность IP адреса
   - Убедитесь, что принтер и компьютер в одной сети

### Проблема: Печать не работает

1. **Проверьте язык программирования принтера:**
   - Зайдите в **Devices** → **Programming Language**
   - Убедитесь, что выбран **EZPL** (не ZPL или EPL)

2. **Проверьте настройки печати:**
   - **Label Settings** → проверьте размер этикетки
   - **Printer Control** → выполните **Calibration**

3. **Проверьте логи:**
   ```bash
   tail -f packages/backend/logs/printer.log
   ```

## 5. Дополнительные настройки принтера

### Настройка качества печати
1. **Printer Settings** → **Settings**
2. Установите:
   - **Print Speed**: 4 (средняя скорость)
   - **Print Darkness**: 20 (оптимальная четкость)
   - **Print Density**: H10

### Настройка размера этикетки
1. **Label Settings**
2. Установите:
   - **Width**: 80mm
   - **Height**: 25mm
   - **Gap**: 3mm

## 6. Полезные команды

### Проверка статуса принтера
```bash
echo "~!S" | nc [IP_ПРИНТЕРА] 9100
```

### Отправка тестовой EZPL команды
```bash
echo "^Q25,3^W80^H10^P1^S4^AD^C1^R0~Q+0^O0^D0^E20~R255^LT10,10,0,1,1,1,N,\"TEST\"E" | nc [IP_ПРИНТЕРА] 9100
```

### Сброс настроек принтера
```bash
echo "~R" | nc [IP_ПРИНТЕРА] 9100
```

## 7. Контакты поддержки

При возникновении проблем:
1. Проверьте документацию GoDEX ZX420
2. Обратитесь к системному администратору для проверки сетевых настроек
3. Проверьте firewall/антивирус - они могут блокировать порт 9100

---

**Важно:** После успешной настройки сетевого подключения, печать будет работать быстрее и надежнее, чем через USB!