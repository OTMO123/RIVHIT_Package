#!/bin/bash

echo "=== Поиск ВСЕХ принтеров в сети 192.168.14.x ==="
echo "Сканируем диапазон 192.168.14.1-254 на порт 9100..."
echo ""

found_printers=()

# Быстрое сканирование с параллельными проверками
for i in {1..254}; do
    (
        ip="192.168.14.$i"
        timeout 0.5 bash -c "echo >/dev/tcp/$ip/9100" 2>/dev/null && echo "✅ Найден принтер: $ip"
    ) &
    
    # Ограничиваем количество параллельных процессов
    if [ $(( i % 20 )) -eq 0 ]; then
        wait
    fi
done

wait

echo ""
echo "=== Проверка найденных принтеров ==="
echo "IP адреса с открытым портом 9100:"
echo ""
echo "192.168.14.100 - это принтер, который печатал (не GoDEX)"
echo ""
echo "Попробуйте другие найденные IP адреса для вашего GoDEX принтера"